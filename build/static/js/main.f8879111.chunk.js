(this["webpackJsonpsprint-11"]=this["webpackJsonpsprint-11"]||[]).push([[0],[,,,,,,function(e,t,a){e.exports=a(13)},,,,,function(e,t,a){},function(e,t,a){e.exports=a.p+"static/media/logo.8f7611ae.svg"},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(3),c=a.n(o),i=(a(11),a(1));var l=function(){return r.a.createElement("div",null,r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"header__container"},r.a.createElement("img",{src:a(12),alt:"logo",className:"logo"}))))},s=r.a.createContext();var u=function(e){var t=e.card,a=e.onCardClick,n=e.onCardLike,o=e.onCardDelete,c=r.a.useContext(s),i=t.owner._id===c._id,l="".concat(i?"photo__remove":"photo__remove_hide "),u=t.likes.some((function(e){return e._id===c._id})),m="".concat(u?"photo__like_active":"photo__like-button ");return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"photo__item"},r.a.createElement("div",{className:"photo__image",onClick:function(){a({card:t})},style:{backgroundImage:"url(".concat(t.link,")")}}),r.a.createElement("button",{type:"button",onClick:function(){o(t._id)},className:l}),r.a.createElement("div",{className:"photo__name"},r.a.createElement("h2",{className:"photo__text"},t.name),r.a.createElement("div",{className:"photo__like"},r.a.createElement("button",{type:"button",onClick:function(){n({card:t})},className:m}),r.a.createElement("h3",{className:"photo__like-count"},t.likes.length)))))};var m=function(e){var t=e.name,a=e.buttonText,n=e.title,o=e.children,c=e.isOpen,i=e.onClose,l=e.onSubmit;return r.a.createElement("div",null,c?r.a.createElement("div",{className:"popup popup_opened popup_type_".concat(t)},r.a.createElement("div",{className:"popup__content"},r.a.createElement("form",{action:"#",className:"form",name:t,onSubmit:l},r.a.createElement("p",{className:"form__text"},n),o,r.a.createElement("button",{type:"submit",className:"form__save"},a)),r.a.createElement("button",{className:"popup__close",onClick:i}))):r.a.createElement("div",null))};var d=function(e){var t=e.cardLink,a=e.cardName,n=e.imagePopupIsOpened,o=e.onClose;return r.a.createElement("div",null,n?r.a.createElement("div",{className:"popup popup_opened popup_type_image"},r.a.createElement("div",{className:"popup__content popup__content_theme_transparent"},r.a.createElement("figure",{className:"figure"},r.a.createElement("img",{src:t,alt:"",className:"figure__image"}),r.a.createElement("figcaption",{className:"figure__caption"},a)),r.a.createElement("button",{type:"button",className:"popup__close",onClick:o}))):r.a.createElement("div",null))};var p=function(e){var t=e.onEditProfile,a=e.onAddPlace,n=e.onEditAvatar,o=e.onClose,c=e.onCardClick,i=e.cards,l=e.imagePopupIsOpen,p=e.imageLink,f=e.imageName,h=e.onCardLike,_=e.onCardDelete,E=r.a.useContext(s);return r.a.createElement("div",null,r.a.createElement("main",{className:"main"},r.a.createElement("section",{className:"profile"},r.a.createElement("div",{className:"profile__container"},r.a.createElement("img",{src:E.avatar,alt:"avatar",className:"profile__avatar",onClick:n}),r.a.createElement("div",{className:"profile__card"},r.a.createElement("h1",{className:"profile__name"},E.name),r.a.createElement("button",{className:"profile__edit",onClick:t}),r.a.createElement("p",{className:"profile__title"},E.about)),r.a.createElement("button",{className:"profile__add",onClick:a}))),r.a.createElement("section",{className:"photo"},r.a.createElement("ul",{className:"photo__container"},i.map((function(e,t){return r.a.createElement(u,{key:t,onCardClick:c,card:e,onCardLike:h,onCardDelete:_})})))),r.a.createElement(m,{name:"delete-card",buttonText:"Yes",title:"Are you sure?",children:r.a.createElement(r.a.Fragment,null)}),r.a.createElement(d,{onClose:o,imagePopupIsOpened:l,cardName:f,cardLink:p})))};var f=function(){return r.a.createElement("div",null,r.a.createElement("footer",{className:"footer"},r.a.createElement("div",{className:"footer__container"},r.a.createElement("p",{className:"footer__copyright"},"\xa9 2020 Around The U.S."))))},h=a(4),_=a(5),E=new(function(){function e(t){var a=t.baseUrl,n=t.headers;Object(h.a)(this,e),this._baseUrl=a,this._headers=n}return Object(_.a)(e,[{key:"getCardList",value:function(){return fetch(this._baseUrl+"/cards",{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error"+e.statusText)})).catch((function(e){return console.log(e)}))}},{key:"getUserInfo",value:function(){return fetch(this._baseUrl+"/users/me",{headers:this._headers}).then((function(e){return e.ok?e.json():Promise.reject("Error"+e.statusText)})).catch((function(e){return console.log(e)}))}},{key:"addCard",value:function(e){var t=e.name,a=e.link;return fetch(this._baseUrl+"/cards",{headers:this._headers,method:"POST",body:JSON.stringify({name:t,link:a})}).then((function(e){return e.ok?e.json():Promise.reject("Error"+e.statusText)})).catch((function(e){return console.log(e)}))}},{key:"removeCard",value:function(e){return fetch(this._baseUrl+"/cards/"+e,{headers:this._headers,method:"DELETE"}).then((function(e){return e.ok?e.json():Promise.reject("Error"+e.statusText)})).catch((function(e){return console.log(e)}))}},{key:"changeLikeCardStatus",value:function(e,t){return(t?fetch(this._baseUrl+"/cards/likes/"+e,{headers:this._headers,method:"PUT"}):fetch(this._baseUrl+"/cards/likes/"+e,{headers:this._headers,method:"DELETE"})).then((function(e){return e.ok?e.json():Promise.reject("Error"+e.statusText)})).catch((function(e){return console.log(e)}))}},{key:"setUserInfo",value:function(e){return fetch(this._baseUrl+"/users/me",{headers:this._headers,method:"PATCH",body:JSON.stringify({name:e.name,about:e.title})}).then((function(e){return e.ok?e.json():Promise.reject("Error"+e.statusText)})).catch((function(e){return console.log(e)}))}},{key:"setUserAvatar",value:function(e){return fetch(this._baseUrl+"/users/me/avatar",{headers:this._headers,method:"PATCH",body:JSON.stringify({avatar:e})}).then((function(e){return e.ok?e.json():Promise.reject("Error"+e.statusText)})).catch((function(e){return console.log(e)}))}}]),e}())({baseUrl:"https://around.nomoreparties.co/v1/group-3",headers:{authorization:"bbe6c8a6-0cbf-4192-8ad0-65526caf9994","Content-Type":"application/json"}});var v=function(e){var t=e.isOpen,a=e.onClose,n=e.onUpdateUser,o=r.a.useContext(s),c=r.a.useState(""),l=Object(i.a)(c,2),u=l[0],d=l[1],p=r.a.useState(""),f=Object(i.a)(p,2),h=f[0],_=f[1];return r.a.useEffect((function(){d(o.name),_(o.about)}),[o]),r.a.createElement("div",null,r.a.createElement(m,{onSubmit:function(e){e.preventDefault(),n({name:u,title:h})},isOpen:t,onClose:a,name:"edit-profile",buttonText:"Save",title:"Edit profile",children:r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{onChange:function(e){d(e.target.value)},id:"profile-name",name:"name",type:"text",className:"form__input form__input_type_name",placeholder:u,required:!0,maxLength:"40",minLength:"2"}),r.a.createElement("span",{id:"profile-name-error",className:"form__error"}),r.a.createElement("input",{onChange:function(e){_(e.target.value)},id:"profile-text",name:"title",type:"text",className:"form__input form__input_type_title",placeholder:h,required:!0,maxLength:"200",minLength:"2"}),r.a.createElement("span",{id:"profile-text-error",className:"form__error"}))}))};var g=function(e){var t=e.isOpen,a=e.onClose,n=e.onUpdateAvatar,o=r.a.useContext(s),c=r.a.useState(""),l=Object(i.a)(c,2),u=l[0],d=l[1],p=r.a.createRef();return r.a.useEffect((function(){d(o.avatar)}),[o]),r.a.createElement("div",null,r.a.createElement(m,{onSubmit:function(e){e.preventDefault(),n(p.current.value)},isOpen:t,onClose:a,name:"edit-avatar",buttonText:"Save",title:"Change profile picture",children:r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{onChange:function(e){d(e.target.value)},ref:p,placeholder:u,id:"avatar-url",name:"link",type:"url",className:"form__input form__input_type_photo-url",required:!0}))}))};var k=function(e){var t=e.isOpen,a=e.onClose,n=e.onAddPlace,o=r.a.useState(""),c=Object(i.a)(o,2),l=c[0],s=c[1],u=r.a.useState(""),d=Object(i.a)(u,2),p=d[0],f=d[1];return r.a.createElement("div",null,r.a.createElement(m,{onSubmit:function(e){e.preventDefault(),n({name:l,link:p})},isOpen:t,onClose:a,name:"add-photo",buttonText:"Create",title:"New place",children:r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{onChange:function(e){s(e.target.value)},id:"photo-title",name:"name",type:"text",className:"form__input form__input_type_photo-title",placeholder:"Title",required:!0,maxLength:"30",minLength:"1"}),r.a.createElement("span",{id:"photo-title-error",className:"form__error"}),r.a.createElement("input",{onChange:function(e){f(e.target.value)},id:"photo-url",name:"link",type:"url",className:"form__input form__input_type_photo-url",placeholder:"Image link",required:!0}),r.a.createElement("span",{id:"photo-url-error",className:"form__error"}))}))};var C=function(){var e=r.a.useState(!1),t=Object(i.a)(e,2),a=t[0],n=t[1],o=r.a.useState(!1),c=Object(i.a)(o,2),u=c[0],m=c[1],d=r.a.useState(!1),h=Object(i.a)(d,2),_=h[0],C=h[1],b=r.a.useState(!1),N=Object(i.a)(b,2),y=N[0],O=N[1],j=r.a.useState(""),x=Object(i.a)(j,2),S=x[0],U=x[1],P=r.a.useState(""),T=Object(i.a)(P,2),L=T[0],A=T[1],I=r.a.useState({}),w=Object(i.a)(I,2),D=w[0],q=w[1],F=r.a.useState([]),J=Object(i.a)(F,2),B=J[0],H=J[1];function W(){n(!1),m(!1),C(!1),C(!1),O(!1)}return r.a.useEffect((function(){E.getUserInfo().then((function(e){q(e)}))}),[]),r.a.useEffect((function(){E.getCardList().then((function(e){H(e)}))}),[]),r.a.createElement(s.Provider,{value:D},r.a.createElement("div",{className:"page"},r.a.createElement(l,null),r.a.createElement(p,{onEditProfile:function(){n(!0)},onAddPlace:function(){m(!0)},onEditAvatar:function(){C(!0)},onCardClick:function(e){O(!0),U(e.card.link),A(e.card.name)},editProfileIsOpen:a,editAvatarIsOpen:_,addPlaceIsOpen:u,imagePopupIsOpen:y,imageLink:S,imageName:L,onClose:W,onCardLike:function(e){var t=e.card.likes.some((function(e){return e._id===D._id}));E.changeLikeCardStatus(e.card._id,!t).then((function(e){var t=B.map((function(t){return t._id===e._id?e:t}));H(t)}))},onCardDelete:function(e){E.removeCard(e).then((function(t){var a=B.filter((function(t){return t._id!==e}));H(a)}))},cards:B}),r.a.createElement(f,null),r.a.createElement(v,{isOpen:a,onClose:W,onUpdateUser:function(e){var t=e.name,a=e.title;E.setUserInfo({name:t,title:a}).then((function(e){W(),q(e)}))}}),r.a.createElement(g,{isOpen:_,onClose:W,onUpdateAvatar:function(e){E.setUserAvatar(e).then((function(e){W(),q(e)}))}}),r.a.createElement(k,{isOpen:u,onClose:W,onAddPlace:function(e){var t=e.name,a=e.link;E.addCard({name:t,link:a}).then((function(e){var t=B.concat(e);H(t),W()}))}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[6,1,2]]]);
//# sourceMappingURL=main.f8879111.chunk.js.map